= will_paginate(@items, { inner_window: 2 }) if @items

/ Libraries
= javascript_script_tag "//use.typekit.net/yws8cub.js"
= javascript_script_tag "//api.tiles.mapbox.com/mapbox.js/v1.6.0/mapbox.js"

/ App

:javascript
	try { Typekit.load(); } catch (e) {}

/[if IE]
	= javascript_script_tag "//html5shiv.googlecode.com/svn/trunk/html5.js"

= partial "_timeline"

-# TODO do in JS
:ruby
	date = Time.now
	hue = [360, date.yday].min + 240
	hue = (hue > 360) ? (hue - 360) : hue

	# minutes...   [       through day       ]   [in day]
	pct_of_day = (((date.hour * 60) + date.min) / 1400.0) * 100
	# Peak at midday
	luminance = (pct_of_day > 50 ? (100 - pct_of_day) : pct_of_day).floor.abs / 100.0

	# bump `luminance` to keep enough contrast at night
	color = ColorMath::HSL.new(hue, 1, (luminance + 0.2)).hex

:javascript
	current_color = "#{color}";

:css
	#nameplate {border-top-color:#{color};}
	#login input[type=submit] {background-color:#{color};}
